import { useState, type FC } from "react";
import { Heart, MapPin, ArrowLeft, Download, Check } from "lucide-react";
import ImageViewerModal from "./ImageViewerModal";
import UploadReceiptModal from "./UploadReceiptModal";
import type { Property } from "../../../modules/Properties";

interface PropertyDetailsProps {
  property: Property;
  onBack: () => void;
  isFavorited?: boolean;
  onFavorite?: (property: Property) => void;
}

const PropertyDetails: FC<PropertyDetailsProps> = ({
  property,
  onBack,
  isFavorited = false,
  onFavorite,
}) => {
  const [liked, setLiked] = useState(isFavorited);
  const [currentImageIndex, setCurrentImageIndex] = useState(0);
  const [isImageViewerOpen, setIsImageViewerOpen] = useState(false);
  const [viewerImageIndex, setViewerImageIndex] = useState(0);
  const [isUploadReceiptOpen, setIsUploadReceiptOpen] = useState(false);

  // Mock additional property details for demonstration
  const propertyDetails = {
    ...property,
    description:
      "This stunning property offers modern living with premium amenities. Located in a prime area with excellent connectivity to major business districts and entertainment zones. The property features contemporary design with spacious rooms and high-quality finishes. Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempus aliquet duis integer porta. Volutpat integer ultricies diam consequat eget. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.",
    documents: ["Title of Property", "Governor's consent"],
    features: [
      {
        icon: (
          <svg
            width="22"
            height="24"
            viewBox="0 0 22 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_19497_27209)">
              <path
                d="M1.258 4.95602L1.098 6.11802L2.228 5.80202L2.669 6.89002L3.489 6.05202L4.415 6.77202L4.707 5.63702L5.869 5.79702L5.553 4.66702L6.641 4.22702L5.803 3.40702L6.523 2.48102L5.388 2.18902L5.548 1.02702L4.418 1.34302L3.977 0.25502L3.152 1.09302L2.226 0.37302L1.934 1.50802L0.772 1.34802L1.088 2.47802L0 2.91902L0.838 3.73902L0.118 4.66502L1.258 4.95602ZM2.687 1.73002C3.05066 1.6061 3.44286 1.59259 3.81418 1.6912C4.1855 1.78981 4.51933 1.99613 4.77358 2.28415C5.02784 2.57218 5.19115 2.92902 5.24294 3.3097C5.29472 3.69039 5.23266 4.07789 5.06458 4.42336C4.8965 4.76884 4.62992 5.05683 4.29844 5.25105C3.96695 5.44526 3.58539 5.53701 3.20184 5.51473C2.8183 5.49245 2.44993 5.35714 2.14316 5.12585C1.83639 4.89456 1.60495 4.57763 1.478 4.21502L1.474 4.20102C1.30824 3.71507 1.34126 3.18331 1.56584 2.72159C1.79042 2.25987 2.18838 1.90562 2.673 1.73602L2.687 1.73202V1.73002ZM4.691 20.582C4.74385 20.5819 4.79616 20.5714 4.84491 20.5509C4.89366 20.5305 4.93787 20.5006 4.975 20.463L5.221 20.209C5.655 19.762 6.261 19.485 6.932 19.485C7.603 19.485 8.209 19.762 8.643 20.209L8.644 20.21L8.896 20.468C8.93313 20.5056 8.97734 20.5355 9.02609 20.5559C9.07484 20.5764 9.12715 20.5869 9.18 20.587C9.29 20.587 9.391 20.541 9.461 20.468L9.727 20.198C9.94898 19.9716 10.214 19.7917 10.5064 19.6691C10.7989 19.5465 11.1129 19.4836 11.43 19.484C12.103 19.484 12.712 19.763 13.146 20.211L13.147 20.212L13.387 20.458C13.4237 20.4962 13.4677 20.5266 13.5164 20.5475C13.565 20.5684 13.6174 20.5793 13.6704 20.5795C13.7233 20.5798 13.7758 20.5695 13.8247 20.5491C13.8736 20.5288 13.9179 20.4988 13.955 20.461L14.199 20.209C14.633 19.762 15.239 19.485 15.91 19.485C16.581 19.485 17.187 19.762 17.621 20.209L17.622 20.21L17.872 20.464C17.9085 20.5028 17.9525 20.5336 18.0013 20.5547C18.0502 20.5758 18.1028 20.5867 18.156 20.5867C18.2092 20.5867 18.2618 20.5758 18.3107 20.5547C18.3595 20.5336 18.4035 20.5028 18.44 20.464L18.686 20.21C18.8487 20.0454 19.0313 19.906 19.234 19.792L19.246 19.786C17.9944 18.6358 16.5308 17.7401 14.937 17.149L14.846 17.12C14.172 14.244 14.766 10.466 15.692 7.60902C15.7127 7.58769 15.732 7.56635 15.75 7.54502C16.4949 7.72633 17.1574 8.15231 17.6315 8.75478C18.1056 9.35725 18.3639 10.1014 18.365 10.868C18.365 11.726 18.049 12.51 17.527 13.11L17.531 13.106L17.604 13.107C18.5105 13.107 19.3799 12.7469 20.0209 12.1059C20.6619 11.4649 21.022 10.5955 21.022 9.68902C21.022 8.78251 20.6619 7.91313 20.0209 7.27213C19.3799 6.63113 18.5105 6.27102 17.604 6.27102L17.493 6.27302H17.498C17.759 6.19802 18.061 6.14602 18.373 6.12802H18.384C19.0389 6.07581 19.6959 6.19891 20.2874 6.48468C20.879 6.77044 21.3838 7.20856 21.75 7.75402L21.758 7.76702C21.9628 7.34165 22.0567 6.87142 22.031 6.40002V6.40702C21.9163 5.51001 21.4517 4.69472 20.7383 4.13892C20.025 3.58312 19.1208 3.33189 18.223 3.44002L18.239 3.43802C18.0148 3.44994 17.792 3.48072 17.573 3.53002L17.599 3.52502L17.6 3.43902C17.6 3.19435 17.577 2.95702 17.531 2.72702L17.535 2.75002C17.4311 1.93461 17.0086 1.19348 16.3599 0.688665C15.7112 0.183846 14.8889 -0.0436094 14.073 0.05602L14.088 0.05502C13.648 0.14302 13.261 0.33202 12.94 0.59702L12.944 0.59402C13.412 0.758371 13.8368 1.02643 14.1866 1.37814C14.5364 1.72985 14.8022 2.1561 14.964 2.62502L14.971 2.64802C14.6866 2.41385 14.3763 2.2132 14.046 2.05002L14.018 2.03702C11.991 1.05302 9.683 1.62002 8.863 3.30802C8.63974 3.76741 8.54177 4.27761 8.579 4.78702L8.578 4.77802C9.24121 4.36573 10.0071 4.14845 10.788 4.15102C11.506 4.15102 12.183 4.33102 12.774 4.64802L12.751 4.63702C13.0562 4.78687 13.3454 4.96747 13.614 5.17602L13.603 5.16802C12.8119 4.84625 11.9343 4.80528 11.1166 5.05191C10.299 5.29854 9.59045 5.8179 9.10917 6.52345C8.62788 7.22901 8.40287 8.07817 8.47162 8.92948C8.54037 9.78079 8.89873 10.5828 9.487 11.202L9.485 11.2C9.854 11.588 10.305 11.896 10.81 12.095L10.835 12.104C10.6378 11.5094 10.5932 10.8748 10.7055 10.2585C10.8178 9.64218 11.0833 9.06402 11.4776 8.57722C11.8719 8.09041 12.3823 7.7106 12.9618 7.47273C13.5414 7.23487 14.1714 7.14659 14.794 7.21602L14.777 7.21402C12.739 11.116 11.516 14.16 11.312 16.505H11.262C10.2619 16.5059 9.26691 16.6469 8.306 16.924L8.382 16.905C7.24942 15.7365 6.39968 14.3241 5.898 12.776L5.877 12.701C5.87567 12.6844 5.87767 12.6694 5.883 12.656C6.17146 12.5338 6.48657 12.488 6.79789 12.5231C7.10921 12.5581 7.40622 12.6729 7.66025 12.8563C7.91428 13.0396 8.11674 13.2854 8.24807 13.5698C8.3794 13.8543 8.43517 14.1677 8.41 14.48V14.474C8.6062 14.3323 8.77218 14.1528 8.89826 13.9462C9.02434 13.7396 9.10798 13.5099 9.14431 13.2706C9.18063 13.0313 9.16891 12.7871 9.10982 12.5524C9.05074 12.3177 8.94547 12.0971 8.80018 11.9035C8.65488 11.7099 8.47247 11.5472 8.2636 11.4249C8.05472 11.3026 7.82357 11.2231 7.58364 11.1911C7.34371 11.1592 7.09982 11.1753 6.8662 11.2387C6.63258 11.302 6.41392 11.4112 6.223 11.56L6.227 11.557C6.32437 11.4327 6.43429 11.3188 6.555 11.217L6.559 11.214C6.91752 10.8998 7.37827 10.727 7.855 10.728C8.095 10.728 8.326 10.771 8.539 10.85L8.525 10.846C8.47739 10.5982 8.36801 10.3664 8.207 10.172L8.209 10.174C8.039 9.99628 7.83474 9.85485 7.60855 9.75826C7.38237 9.66166 7.13895 9.61192 6.893 9.61202C6.409 9.61202 5.969 9.80102 5.643 10.109L5.644 10.108C5.55533 10.1827 5.474 10.262 5.4 10.346L5.398 10.348C5.3182 10.2359 5.22705 10.1324 5.126 10.039L5.125 10.038C4.97058 9.87644 4.78494 9.74792 4.57935 9.66025C4.37376 9.57258 4.1525 9.52759 3.929 9.52802C3.50704 9.52738 3.10088 9.68841 2.794 9.97802L2.795 9.97702C2.645 10.14 2.534 10.34 2.477 10.562L2.475 10.571C2.73072 10.4908 3.00159 10.4711 3.26624 10.5134C3.53089 10.5557 3.78208 10.659 4 10.815L3.995 10.811C3.7879 10.8017 3.58043 10.8171 3.377 10.857L3.393 10.854C2.86537 10.9089 2.38051 11.1692 2.04316 11.5786C1.7058 11.988 1.54303 12.5136 1.59 13.042L1.589 13.034C1.643 13.312 1.764 13.556 1.936 13.756L1.934 13.754C2.231 13.024 2.88 12.494 3.665 12.371L3.678 12.369C3.8547 12.3337 4.03493 12.3193 4.215 12.326H4.211C3.70099 12.463 3.26628 12.797 3.00251 13.2545C2.73874 13.712 2.66752 14.2555 2.8045 14.7655C2.94148 15.2755 3.27546 15.7102 3.73295 15.974C4.19045 16.2378 4.73399 16.309 5.244 16.172L5.23 16.175C4.91978 15.9558 4.67838 15.6529 4.53405 15.3015C4.38972 14.9502 4.34843 14.565 4.415 14.191L4.413 14.203C4.46208 13.9206 4.5719 13.6521 4.73489 13.4163C4.89788 13.1804 5.11014 12.9828 5.357 12.837L5.366 12.832C5.55389 14.5022 5.9974 16.1336 6.681 17.669L6.639 17.564C5.41748 18.1423 4.28825 18.8982 3.288 19.807L3.299 19.797C3.728 19.943 4.093 20.178 4.389 20.481L4.39 20.482C4.47548 20.547 4.57961 20.5828 4.687 20.584L4.691 20.582Z"
                fill="#9CA1AA"
              />
              <path
                d="M1.20199 21.61C1.25728 21.6098 1.31198 21.5986 1.36295 21.5771C1.41392 21.5557 1.46015 21.5244 1.49899 21.485C1.62233 21.3578 1.76995 21.2567 1.93309 21.1876C2.09624 21.1185 2.2716 21.0828 2.44877 21.0827C2.62595 21.0826 2.80135 21.1181 2.96457 21.187C3.12778 21.256 3.27551 21.3569 3.39899 21.484C3.72799 21.821 4.18599 22.03 4.69399 22.03C5.20199 22.03 5.65999 21.821 5.98799 21.484L6.23399 21.232C6.32533 21.138 6.43461 21.0632 6.55536 21.0121C6.67612 20.9611 6.80588 20.9348 6.93699 20.9348C7.06809 20.9348 7.19786 20.9611 7.31861 21.0121C7.43936 21.0632 7.54865 21.138 7.63999 21.232L7.89199 21.49C8.21999 21.828 8.67799 22.037 9.18599 22.037C9.68999 22.037 10.147 21.83 10.474 21.496L10.742 21.226C10.8332 21.1324 10.9424 21.0582 11.0629 21.0076C11.1834 20.957 11.3128 20.9312 11.4435 20.9317C11.5742 20.9322 11.7035 20.9589 11.8237 21.0103C11.9438 21.0617 12.0524 21.1368 12.143 21.231L12.383 21.477C12.709 21.817 13.168 22.029 13.676 22.029H13.679C14.187 22.029 14.645 21.818 14.972 21.48L14.973 21.479L15.217 21.229C15.3083 21.135 15.4176 21.0602 15.5384 21.0091C15.6591 20.9581 15.7889 20.9318 15.92 20.9318C16.0511 20.9318 16.1809 20.9581 16.3016 21.0091C16.4224 21.0602 16.5316 21.135 16.623 21.229L16.869 21.481C17.197 21.818 17.655 22.027 18.162 22.027C18.669 22.027 19.127 21.818 19.455 21.481L19.702 21.226C19.7933 21.132 19.9026 21.0572 20.0234 21.0061C20.1441 20.9551 20.2739 20.9288 20.405 20.9288C20.5361 20.9288 20.6659 20.9551 20.7866 21.0061C20.9074 21.0572 21.0166 21.132 21.108 21.226C21.1463 21.2659 21.1922 21.2977 21.2431 21.3194C21.2939 21.3411 21.3487 21.3523 21.404 21.3523C21.4593 21.3523 21.514 21.3411 21.5649 21.3194C21.6158 21.2977 21.6617 21.2659 21.7 21.226C21.7788 21.144 21.8229 21.0347 21.8229 20.921C21.8229 20.8073 21.7788 20.698 21.7 20.616C21.5319 20.4427 21.3307 20.3049 21.1084 20.2108C20.8861 20.1166 20.6471 20.0681 20.4057 20.068C20.1643 20.0679 19.9253 20.1162 19.7029 20.2102C19.4805 20.3042 19.2792 20.4418 19.111 20.615L18.865 20.869C18.7736 20.9631 18.6644 21.0378 18.5436 21.0889C18.4229 21.1399 18.2931 21.1662 18.162 21.1662C18.0309 21.1662 17.9011 21.1399 17.7804 21.0889C17.6596 21.0378 17.5503 20.9631 17.459 20.869L17.213 20.615C17.0449 20.4417 16.8437 20.3039 16.6214 20.2098C16.3991 20.1156 16.1601 20.0671 15.9187 20.067C15.6773 20.0669 15.4383 20.1152 15.2159 20.2092C14.9935 20.3032 14.7922 20.4408 14.624 20.614L14.38 20.864C14.2884 20.9579 14.179 21.0324 14.0581 21.0832C13.9373 21.134 13.8075 21.16 13.6764 21.1597C13.5453 21.1594 13.4155 21.1329 13.2949 21.0816C13.1742 21.0302 13.0651 20.9552 12.974 20.861L12.734 20.615C12.5671 20.4409 12.367 20.3022 12.1454 20.2071C11.9239 20.112 11.6854 20.0625 11.4443 20.0615C11.2032 20.0605 10.9644 20.108 10.742 20.2012C10.5196 20.2944 10.3183 20.4314 10.15 20.604L9.88399 20.874C9.79239 20.967 9.68315 21.0407 9.56268 21.0909C9.44221 21.141 9.31293 21.1666 9.18244 21.1662C9.05194 21.1657 8.92284 21.1392 8.80273 21.0881C8.68262 21.0371 8.57392 20.9626 8.48299 20.869L8.23099 20.611C7.90199 20.274 7.44399 20.065 6.93599 20.065C6.42799 20.065 5.96999 20.274 5.64199 20.611L5.39599 20.863C5.30486 20.9568 5.1959 21.0314 5.07551 21.0824C4.95512 21.1334 4.82574 21.1598 4.69499 21.16H4.68999C4.5599 21.1599 4.43115 21.1337 4.31141 21.0828C4.19167 21.032 4.08338 20.9576 3.99299 20.864C3.60199 20.461 3.05599 20.211 2.45099 20.211C1.84599 20.211 1.29999 20.461 0.909986 20.863L0.908986 20.864C0.830289 20.9461 0.786435 21.0555 0.786622 21.1692C0.786808 21.2829 0.83102 21.3922 0.909986 21.474C0.947181 21.5155 0.992636 21.5488 1.04344 21.5717C1.09424 21.5946 1.14926 21.6066 1.20499 21.607L1.20199 21.61Z"
                fill="#9CA1AA"
              />
              <path
                d="M21.6962 22.584C21.5281 22.4107 21.3269 22.2729 21.1046 22.1787C20.8823 22.0846 20.6433 22.036 20.4019 22.0359C20.1605 22.0359 19.9215 22.0842 19.6991 22.1782C19.4767 22.2722 19.2754 22.4098 19.1072 22.583L18.8612 22.837C18.7698 22.931 18.6605 23.0058 18.5398 23.0568C18.419 23.1079 18.2893 23.1342 18.1582 23.1342C18.0271 23.1342 17.8973 23.1079 17.7766 23.0568C17.6558 23.0058 17.5465 22.931 17.4552 22.837L17.2082 22.582C17.0401 22.4087 16.8389 22.2709 16.6166 22.1767C16.3943 22.0826 16.1553 22.034 15.9139 22.0339C15.6725 22.0339 15.4335 22.0822 15.2111 22.1762C14.9887 22.2702 14.7874 22.4078 14.6192 22.581L14.3752 22.831C14.2836 22.9248 14.1742 22.9994 14.0533 23.0502C13.9325 23.101 13.8026 23.127 13.6715 23.1267C13.5404 23.1264 13.4107 23.0998 13.2901 23.0485C13.1694 22.9972 13.0603 22.9222 12.9692 22.828L12.7292 22.582C12.5623 22.4079 12.3622 22.2692 12.1406 22.1741C11.919 22.079 11.6806 22.0295 11.4395 22.0285C11.1984 22.0274 10.9596 22.0749 10.7372 22.1681C10.5148 22.2613 10.3135 22.3983 10.1452 22.571L9.87917 22.841C9.78758 22.9339 9.67834 23.0077 9.55787 23.0578C9.4374 23.108 9.30812 23.1336 9.17762 23.1331C9.04712 23.1327 8.91803 23.1062 8.79792 23.0551C8.67781 23.0041 8.5691 22.9296 8.47817 22.836L8.22617 22.578C8.05809 22.4047 7.85692 22.2669 7.6346 22.1727C7.41228 22.0786 7.17332 22.03 6.93189 22.0299C6.69045 22.0299 6.45146 22.0782 6.22906 22.1722C6.00667 22.2662 5.80539 22.4038 5.63717 22.577L5.39117 22.831C5.29983 22.925 5.19055 22.9998 5.0698 23.0508C4.94904 23.1019 4.81928 23.1282 4.68817 23.1282C4.55707 23.1282 4.4273 23.1019 4.30655 23.0508C4.1858 22.9998 4.07651 22.925 3.98517 22.831C3.59417 22.428 3.04817 22.178 2.44317 22.178C1.83817 22.178 1.29217 22.428 0.902174 22.83L0.901174 22.831C0.822476 22.9131 0.778623 23.0225 0.778809 23.1362C0.778996 23.2499 0.823208 23.3591 0.902174 23.441C0.940334 23.4814 0.9863 23.5136 1.03728 23.5356C1.08826 23.5577 1.14319 23.5692 1.19875 23.5693C1.2543 23.5695 1.3093 23.5584 1.36043 23.5367C1.41156 23.515 1.45774 23.4831 1.49617 23.443C1.61952 23.3158 1.76713 23.2147 1.93028 23.1455C2.09343 23.0764 2.26878 23.0408 2.44596 23.0407C2.62314 23.0406 2.79853 23.0761 2.96175 23.145C3.12497 23.2139 3.2727 23.3149 3.39617 23.442C3.72517 23.779 4.18317 23.988 4.69117 23.988C5.19917 23.988 5.65717 23.779 5.98517 23.442L6.23117 23.19C6.32251 23.0959 6.4318 23.0212 6.55255 22.9701C6.6733 22.9191 6.80307 22.8928 6.93417 22.8928C7.06528 22.8928 7.19504 22.9191 7.3158 22.9701C7.43655 23.0212 7.54583 23.0959 7.63717 23.19L7.88917 23.448C8.05653 23.621 8.25691 23.7588 8.47844 23.853C8.69997 23.9473 8.93816 23.9961 9.17891 23.9967C9.41965 23.9972 9.65806 23.9495 9.88003 23.8563C10.102 23.7631 10.303 23.6263 10.4712 23.454L10.7392 23.184C10.8304 23.0904 10.9395 23.0161 11.0601 22.9656C11.1806 22.915 11.31 22.8892 11.4407 22.8897C11.5714 22.8901 11.7007 22.9169 11.8209 22.9683C11.941 23.0197 12.0496 23.0948 12.1402 23.189L12.3802 23.435C12.7062 23.775 13.1652 23.987 13.6732 23.987H13.6762C14.1832 23.987 14.6412 23.777 14.9682 23.439L15.2122 23.188C15.3035 23.0939 15.4128 23.0192 15.5335 22.9681C15.6543 22.9171 15.7841 22.8908 15.9152 22.8908C16.0463 22.8908 16.176 22.9171 16.2968 22.9681C16.4176 23.0192 16.5268 23.0939 16.6182 23.188L16.8642 23.44C17.1922 23.777 17.6502 23.986 18.1572 23.986C18.6642 23.986 19.1222 23.777 19.4502 23.44L19.6962 23.188C19.7875 23.0939 19.8968 23.0192 20.0175 22.9681C20.1383 22.9171 20.2681 22.8908 20.3992 22.8908C20.5303 22.8908 20.66 22.9171 20.7808 22.9681C20.9016 23.0192 21.0108 23.0939 21.1022 23.188C21.1404 23.2279 21.1864 23.2597 21.2373 23.2814C21.2881 23.3031 21.3429 23.3143 21.3982 23.3143C21.4535 23.3143 21.5082 23.3031 21.5591 23.2814C21.61 23.2597 21.6559 23.2279 21.6942 23.188C21.7749 23.1071 21.8204 22.9977 21.8208 22.8834C21.8212 22.7691 21.7764 22.6594 21.6962 22.578V22.584Z"
                fill="#9CA1AA"
              />
            </g>
            <defs>
              <clipPath id="clip0_19497_27209">
                <rect width="22" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        ),
        value: "1000sqms",
        label: "Land size",
      },
      {
        icon: (
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M7 12.5C7 9.7385 9.2385 7.5 12 7.5C14.7615 7.5 17 9.7385 17 12.5V20.5H7V12.5Z"
              fill="#9CA1AA"
              stroke="#9CA1AA"
              stroke-width="2"
              stroke-linejoin="round"
            />
            <path
              d="M12.0001 2.5V4M17.9461 4.664L16.9816 5.813M21.1096 10.1435L19.6321 10.404M2.89062 10.1435L4.36812 10.404M6.05463 4.664L7.01862 5.813M3.00012 20.5H21.5001"
              stroke="#9CA1AA"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        ),
        value: "Secured",
        label: "Security",
      },
      {
        icon: (
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_19497_27245)">
              <path
                d="M10.4954 1.5H6.92349C5.54536 1.5 4.34067 2.44219 4.01255 3.77812L0.0656742 19.7109C-0.285888 21.1266 0.787549 22.5 2.25005 22.5H10.4954V19.5C10.4954 18.6703 11.1657 18 11.9954 18C12.825 18 13.4954 18.6703 13.4954 19.5V22.5H21.75C23.2125 22.5 24.286 21.1266 23.9344 19.7109L19.9922 3.77812C19.6594 2.44219 18.4594 1.5 17.0766 1.5H13.4954V4.5C13.4954 5.32969 12.825 6 11.9954 6C11.1657 6 10.4954 5.32969 10.4954 4.5V1.5ZM13.4954 10.5V13.5C13.4954 14.3297 12.825 15 11.9954 15C11.1657 15 10.4954 14.3297 10.4954 13.5V10.5C10.4954 9.67031 11.1657 9 11.9954 9C12.825 9 13.4954 9.67031 13.4954 10.5Z"
                fill="#9CA1AA"
              />
            </g>
            <defs>
              <clipPath id="clip0_19497_27245">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        ),
        value: "Yes",
        label: "Accessible",
      },
      {
        icon: (
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3.87312 15.708L6.45012 12.248C6.53079 12.1407 6.62845 12.06 6.74312 12.006C6.85779 11.952 6.97545 11.925 7.09612 11.925C7.21679 11.925 7.33478 11.9517 7.45012 12.005C7.56412 12.0597 7.66145 12.1407 7.74212 12.248L10.2581 15.6C10.3595 15.7334 10.4775 15.8334 10.6121 15.9C10.7468 15.9667 10.8985 16 11.0671 16C11.4891 16 11.7921 15.8127 11.9761 15.438C12.1601 15.0634 12.1271 14.709 11.8771 14.375L10.8341 12.985C10.7268 12.8357 10.6731 12.673 10.6731 12.497C10.6731 12.321 10.7271 12.1604 10.8351 12.015L13.4501 8.51702C13.5308 8.40969 13.6285 8.32902 13.7431 8.27502C13.8578 8.22102 13.9755 8.19435 14.0961 8.19502C14.2168 8.19569 14.3348 8.22235 14.4501 8.27502C14.5655 8.32769 14.6628 8.40835 14.7421 8.51702L20.1271 15.707C20.3258 15.977 20.3515 16.26 20.2041 16.556C20.0568 16.852 19.8158 17 19.4811 17H4.52912C4.18245 17 3.93679 16.852 3.79212 16.556C3.64745 16.26 3.67445 15.9774 3.87312 15.708Z"
              fill="#9CA1AA"
            />
          </svg>
        ),
        value: "Wetland",
        label: "Topography",
      },
    ],
    images: property.images || [property.image], // Use property images or fallback to single image
  };

  const handleFavorite = () => {
    const newState = !liked;
    setLiked(newState);
    if (onFavorite) onFavorite(property);
  };

  const handleImageClick = (index: number) => {
    setViewerImageIndex(index);
    setIsImageViewerOpen(true);
  };

  const handleCloseImageViewer = () => {
    setIsImageViewerOpen(false);
  };

  const handleUploadReceipt = () => {
    setIsUploadReceiptOpen(true);
  };

  const handleCloseUploadReceipt = () => {
    setIsUploadReceiptOpen(false);
  };

  const handleSubmitReceipt = (data: {
    clientName: string;
    amount: string;
    files: unknown[];
  }) => {
    console.log("Receipt submitted:", data);
    // Here i will send the data to your backend
    // For now, i'll just log it and close the modal
    setIsUploadReceiptOpen(false);
  };

  return (
    <div className="w-full">
      {/* Breadcrumb Navigation */}
      <div className="flex items-center gap-2 mb-6">
        <button
          onClick={onBack}
          className="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors"
        >
          <ArrowLeft className="w-4 h-4" />
          <span className="text-sm">Properties</span>
        </button>
        <span className="text-gray-400">/</span>
        <span className="text-sm font-medium text-gray-900">
          Property Details
        </span>
      </div>

      {/* Main Content */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* Left Column - Property Images and Info */}
        <div className="lg:col-span-2 space-y-6">
          {/* Image Gallery */}
          <div className="space-y-4">
            {/* Main Image */}
            <div className="relative">
              <button
                onClick={() => handleImageClick(currentImageIndex)}
                className="w-full h-64 sm:h-80 lg:h-96 rounded-lg overflow-hidden cursor-pointer hover:opacity-95 transition-opacity"
              >
                <img
                  src={propertyDetails.images[currentImageIndex]}
                  alt={property.title}
                  className="w-full h-full object-cover"
                />
              </button>

              {/* Favorite Button */}
              <button
                onClick={handleFavorite}
                className={`absolute top-4 left-4 w-10 h-10 rounded-full flex items-center justify-center transition ${
                  liked ? "bg-[#5E17EB]" : "bg-black/50 backdrop-blur-md"
                }`}
              >
                <Heart
                  className={`w-5 h-5 transition-all duration-200 ${
                    liked ? "fill-white text-white" : "text-white"
                  }`}
                />
              </button>

              {/* Commission Badge */}
              <div className="absolute bottom-4 left-4 bg-black/60 text-white text-xs font-semibold px-3 py-1 rounded-md">
                {property.commission}
              </div>
            </div>

            {/* Thumbnail Images */}
            <div className="grid grid-cols-4 gap-2 ">
              {propertyDetails.images.map((image, index) => (
                <button
                  key={index}
                  onClick={() => {
                    setCurrentImageIndex(index);
                    handleImageClick(index);
                  }}
                  className={`relative aspect-square rounded-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform ${
                    index === currentImageIndex ? "ring-2 ring-[#5E17EB]" : ""
                  }`}
                >
                  <img
                    src={image}
                    alt={`Property view ${index + 1}`}
                    className="w-full h-full object-cover"
                  />
                  {index === propertyDetails.images.length - 1 && (
                    <div className="absolute inset-0 bg-black/50 flex items-center justify-center">
                      <span className="text-white text-xs font-medium">
                        View all
                      </span>
                    </div>
                  )}
                </button>
              ))}
            </div>
          </div>

          {/* Property Information */}
          <div className="space-y-6">
            {/* Property Title and Price */}
            <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
              <div>
                <h1 className="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">
                  {property.title}
                </h1>
                <div className="flex items-center text-gray-600">
                  <MapPin className="w-4 h-4 mr-2" />
                  <span>{property.location}</span>
                </div>
              </div>
              <div className="text-left md:right">
                <p className="text-xl sm:text-3xl font-bold text-[#6D00C2]">
                  {property.price}
                </p>
              </div>
            </div>

            {/* About this Property */}
            <div>
              <h2 className="text-xl font-semibold text-gray-900 mb-3">
                About this Property
              </h2>
              <p className="text-gray-600 leading-relaxed mb-2">
                {propertyDetails.description}
              </p>
              <button className="text-[#6D00C2] font-medium text-sm hover:underline">
                Read More...
              </button>
            </div>

            {/* Documents for this Property */}
            <div>
              <h2 className="text-xl font-semibold text-gray-900 mb-3">
                Documents for this Property
              </h2>
              <div className="bg-white border border-gray-200 rounded-lg p-4 space-y-3">
                {propertyDetails.documents.map((doc, index) => (
                  <div key={index} className="flex items-center gap-3">
                    <div className="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                      <Check className="w-3 h-3 text-white" />
                    </div>
                    <span className="text-gray-700">{doc}</span>
                  </div>
                ))}
              </div>
            </div>

            {/* Features */}
            <div>
              <h2 className="text-xl font-semibold text-gray-900 mb-3">
                Features
              </h2>
              <div className="bg-white border border-gray-200 rounded-lg p-4">
                <div className="grid grid-cols-2 gap-4">
                  {propertyDetails.features.map((feature, index) => (
                    <div key={index} className="flex items-center gap-3">
                      <span className="text-2xl">{feature.icon}</span>
                      <div>
                        <p className="font-semibold text-gray-900">
                          {feature.value}
                        </p>
                        <p className="text-sm text-gray-600">{feature.label}</p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Right Column - Location and Actions */}
        <div className="space-y-6">
          {/* Location */}
          <div>
            <div className="flex items-center gap-2 mb-4">
              <MapPin className="w-5 h-5 text-gray-600" />
              <h3 className="text-lg font-semibold text-gray-900">
                {property.location}
              </h3>
            </div>

            {/* Map Placeholder */}
            <div className="w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center">
              <div className="text-center">
                <MapPin className="w-8 h-8 text-gray-400 mx-auto mb-2" />
                <p className="text-gray-500 text-sm">Map View</p>
                <p className="text-gray-400 text-xs">
                  Interactive map would be here
                </p>
              </div>
            </div>
          </div>

          {/* Action Buttons */}
          <div className="space-y-3">
            <button
              onClick={handleUploadReceipt}
              className="w-full bg-[#5E17EB] text-white py-3 px-4 rounded-lg font-semibold hover:bg-[#4A14C7] transition-colors flex items-center justify-center gap-2"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16 0.82664C16 0.649829 15.9298 0.48026 15.8047 0.355235C15.6797 0.230211 15.5101 0.159973 15.3333 0.159973H7.05333C6.14667 0.159973 5.72 1.00664 5.72 1.80664C5.7256 4.76986 5.52959 7.73003 5.13333 10.6666C5.12714 10.705 5.10776 10.7399 5.07856 10.7655C5.04935 10.791 5.01213 10.8056 4.97333 10.8066H2.97333C1.64 10.8066 1.49333 12.1866 1.41333 13.0066C1.33333 14.32 1.15333 14.5 0.666667 14.5C0.489856 14.5 0.320286 14.5702 0.195262 14.6952C0.0702379 14.8203 0 14.9898 0 15.1666C0 15.3434 0.0702379 15.513 0.195262 15.638C0.320286 15.7631 0.489856 15.8333 0.666667 15.8333H8.33333C9.92 15.8333 10.1467 14.26 10.28 13.3266C10.3933 12.54 10.48 12.1666 10.6667 12.1666H10.94C10.9752 12.1662 11.0097 12.1769 11.0384 12.1973C11.0672 12.2177 11.0887 12.2466 11.1 12.28C11.14 12.4066 11.18 12.58 11.2067 12.7066C11.34 13.3333 11.58 14.5 13 14.5C15.7133 14.5 16 6.80664 16 3.51331V0.82664ZM8.04 8.99997C7.90739 8.99997 7.78021 8.94729 7.68645 8.85353C7.59268 8.75976 7.54 8.63258 7.54 8.49997C7.54 8.36736 7.59268 8.24019 7.68645 8.14642C7.78021 8.05265 7.90739 7.99997 8.04 7.99997H12.04C12.1726 7.99997 12.2998 8.05265 12.3936 8.14642C12.4873 8.24019 12.54 8.36736 12.54 8.49997C12.54 8.63258 12.4873 8.75976 12.3936 8.85353C12.2998 8.94729 12.1726 8.99997 12.04 8.99997H8.04ZM7.87333 3.16664C7.87333 3.03403 7.92601 2.90685 8.01978 2.81309C8.11355 2.71932 8.24073 2.66664 8.37333 2.66664H9.70667C9.83928 2.66664 9.96645 2.71932 10.0602 2.81309C10.154 2.90685 10.2067 3.03403 10.2067 3.16664C10.2067 3.29925 10.154 3.42642 10.0602 3.52019C9.96645 3.61396 9.83928 3.66664 9.70667 3.66664H8.37333C8.24073 3.66664 8.11355 3.61396 8.01978 3.52019C7.92601 3.42642 7.87333 3.29925 7.87333 3.16664ZM12.3733 6.33331H8.54C8.40739 6.33331 8.28022 6.28063 8.18645 6.18686C8.09268 6.09309 8.04 5.96591 8.04 5.83331C8.04 5.7007 8.09268 5.57352 8.18645 5.47975C8.28022 5.38598 8.40739 5.33331 8.54 5.33331H12.3733C12.5059 5.33331 12.6331 5.38598 12.7269 5.47975C12.8207 5.57352 12.8733 5.7007 12.8733 5.83331C12.8733 5.96591 12.8207 6.09309 12.7269 6.18686C12.6331 6.28063 12.5059 6.33331 12.3733 6.33331ZM8.95333 13.1333C8.78667 14.3133 8.65333 14.5 8.32667 14.5H2.74C2.71439 14.4986 2.68933 14.492 2.66639 14.4805C2.64345 14.4691 2.62312 14.453 2.60667 14.4333C2.59693 14.4113 2.5919 14.3874 2.5919 14.3633C2.5919 14.3392 2.59693 14.3154 2.60667 14.2933C2.69782 13.9234 2.75803 13.5465 2.78667 13.1666C2.79352 12.8275 2.8566 12.4918 2.97333 12.1733H8.97333C8.99847 12.1736 9.02322 12.1795 9.04574 12.1907C9.06825 12.2019 9.08794 12.2181 9.10333 12.2379C9.11872 12.2578 9.12941 12.2809 9.13461 12.3055C9.1398 12.3301 9.13937 12.3556 9.13333 12.38C9.02667 12.6666 8.98667 12.9 8.95333 13.1333Z"
                  fill="white"
                />
              </svg>
              Upload Receipt
            </button>

            <button className="w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
              <Download className="w-5 h-5" />
              Download all documents
            </button>
          </div>
        </div>
      </div>

      {/* Image Viewer Modal */}
      <ImageViewerModal
        isOpen={isImageViewerOpen}
        onClose={handleCloseImageViewer}
        images={propertyDetails.images}
        initialIndex={viewerImageIndex}
      />

      {/* Upload Receipt Modal */}
      <UploadReceiptModal
        isOpen={isUploadReceiptOpen}
        onClose={handleCloseUploadReceipt}
        onSubmit={handleSubmitReceipt}
      />
    </div>
  );
};

export default PropertyDetails;
